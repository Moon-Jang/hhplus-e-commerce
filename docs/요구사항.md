# 기능 요구사항

| 번호 | 도메인    | 기능                  | 세부내용                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| ---- | --------- | --------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1    | 잔액      | 잔액 충전             | 1. 유저는 잔액을 충전할 수 있다.<br>2. 유저가 유효하지 않을 경우 실패한다.<br> - 유저가 존재하지 않을 경우 실패한다.<br> - 탈퇴한 유저인 경우 실패한다.<br>3. 충전 금액이 유효하지 않을 경우 실패한다.<br> - 충전 금액은 최소 100 최대 1,000,000 으로 제한한다.<br> - 충전시 최대 잔액이 1,000,000 이 넘을 경우 실패한다.<br>4. 잔액 충전시 잔액 히스토리도 남긴다.                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 2    | 잔액      | 잔액 조회             | 1. 유저는 잔액을 조회할 수 있다.<br>2. 유저가 유효하지 않을 경우 실패한다.<br> - 유저가 존재하지 않을 경우 실패한다.<br> - 탈퇴한 유저인 경우 실패한다.<br>3. 유저의 잔액이 없는 경우 0원으로 초기화하여 생성한다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 3    | 상품      | 상품 상세 조회        | 1. 유저는 상품의 상세 정보를 조회할 수 있다.<br>2. 상품 상세 조회시 아래와 같은 항목을 조회한다.<br> - ID<br> - 이름<br> - 가격<br> - 잔여수량<br> - 상세설명<br>3. 상품이 존재하지 않을 경우 실패한다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 4    | 상품      | 상품 목록 조회        | 1. 유저는 상품 목록을 조회할 수 있다.<br>2. 상품 목록 조회시 아래와 같은 항목을 조회한다.<br> - ID<br> - 이름<br> - 가격<br> - 잔여수량                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 5    | 상품      | 인기 판매 상품 조회   | 1. 유저는 최근 3일간 가장많이 팔린 상위 5개 상품 정보를 조회 할 수 있다.<br>2. 한국시간 기준 매일 자정(00:00:00)에 3일전 데이터 통계를 기반으로 상위 상품을 선정한다.<br> - EX) 현재 시간이 3/30 00:00:00 (KST) 이라면?<br> - 3/27 00:00:00 ~ 3/29 23:59:59                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 6    | 쿠폰      | 선착순 쿠폰 발급      | 1. 유저는 선착순으로 쿠폰을 발급 받을 수 있다.<br>2. 유저가 유효하지 않을 경우 실패한다.<br> - 유저가 존재하지 않을 경우 실패한다.<br> - 탈퇴한 유저인 경우 실패한다.<br>3. 쿠폰 발급은 발급 시작 시간을 기준으로 선착순으로 발급 받을 수 있다.<br> 4. 쿠폰에는 유효기간이 존재한다. (KST 기준) <br> - 유효기간 = 일자(발급일 + 쿠폰에 지정된 만료일) 23:59:59 <br> - EX) 유효기간 = (2025-01-01 + 7 day) 23:59:59 <br> = 2025-01-08 23:59:59                                                                                                                                                                                                                                                                                                                                                                                |
| 7    | 쿠폰      | 선착순 쿠폰 목록 조회 | 1. 유저는 발급 가능한 선착순 쿠폰 목록을 조회할 수 있다.<br>2. 선착순 쿠폰 목록 조회시 아래와 같은 항목을 조회한다.<br> - ID<br> - 이름<br> - 할인 금액<br> - 발급 시작 시간<br> - 발급 가능 수량<br> - 발급 가능 여부<br>3. 발급 가능 여부는 아래와 같은 조건으로 판단한다.<br> - 발급 시작 시간이 현재 시간 이전인 경우<br> - 발급 가능 수량이 남아있는 경우                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 8    | 쿠폰      | 보유한 쿠폰 목록 조회 | 1. 유저는 보유한 쿠폰 목록을 조회할 수 있다.<br>2. 유저가 유효하지 않을 경우 실패한다.<br> - 유저가 존재하지 않을 경우 실패한다.<br> - 탈퇴한 유저인 경우 실패한다.<br>3. 유저는 사용/미사용 쿠폰을 구분할 수 있다.<br>4. 쿠폰 목록 조회 아래와 같은 항목을 조회한다.<br> - ID<br> - 이름<br> - 할인 금액<br> - 유효 기간<br> - 사용일시                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 9    | 주문/결제 | 주문                  | 1. 유저는 구매하고 싶은 상품들에 대한 정보를 입력받아 주문하고 결제를 수행한다.<br>2. 주문에 필요한 정보에는 아래와 같은 항목들이 있다.<br> - 상품 ID<br> - 구매 수량<br> - 쿠폰 ID (선택)<br>3. 주문시 쿠폰을 사용할 수 있고 전체 쿠폰 할인액은 전체 주문 금액에 대해서 할인한다.<br>4. 유저가 유효하지 않을 경우 실패한다.<br> - 유저가 존재하지 않을 경우 실패한다.<br> - 탈퇴한 유저인 경우 실패한다.<br>5. 상품 금액보다 잔액이 부족할 경우 실패한다.<br>6. 상품이 유효하지 않을 경우 실패한다.<br> - 상품이 존재하지 않을 경우 실패한다.<br> - 상품의 재고가 부족할 경우 실패한다.<br>7. 쿠폰이 유효하지 않을 경우 실패한다.<br> - 쿠폰이 존재하지 않을 경우 실패한다.<br> - 쿠폰이 유효기간이 지났을 경우 실패한다.<br> - 이미 사용된 쿠폰일 경우 실패한다.<br>8. 주문 완료시 주문 정보를 데이터 플랫폼으로 전송한다. |
| 10   | 주문/결제 | 결제                  | 1. 유저는 결제할 수 있다.<br>2. 결제 시 쿠폰을 사용할 수 있고 전체 쿠폰 할인액은 전체 주문 금액에 대해서 할인한다.<br>3. 총 결제액 = Σ(상품 금액 × 상품 수량) - 쿠폰 할인액<br>4. 유저가 보유한 잔액이 총 결제액보다 적을 경우 결제에 실패한다.<br>5. 결제 성공 시 유저의 잔액은 총 결제액만큼 차감된다.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

# 비기능 요구사항

| 번호 | 구분   | 기능               | 세부내용                                                                                                                                                                                                                                              |
| ---- | ------ | ------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1    | 인프라 | 다중 인스턴스 지원 | 다수의 인스턴스로 어플리케이션이 동작하더라도 기능에 문제가 없도록 작성하도록 합니다.                                                                                                                                                                 |
| 2    | 성능   | 동시성 제어        | 1. 선착순 쿠폰 발급시 먼저 요청한 순서대로 발급해주어야 합니다.<br>2. 하나의 상품에 주문이 동시다발적으로 들어와도 상품의 재고는 정합성을 유지하여야 합니다.<br>3. 하나의 쿠폰을 여러 주문에 동시에 쓸 경우 하나의 주문에만 쿠폰이 사용되어야 합니다. |
